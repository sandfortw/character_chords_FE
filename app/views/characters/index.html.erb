<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Character Page</title>
  <!-- Add your stylesheets and other resources here -->
</head>
<body class="body bg-white dark:bg-[#0F172A]">
  <div class="bg-black before:animate-pulse before:bg-gradient-to-b before:from-gray-900 overflow-hidden before:via-[#00FF00] before:to-gray-900 before:absolute">
    <div id="myDIV">
      <div class="w-[100vw] h-[100vh] px-3 sm:px-5 flex items-center justify-center absolute">
        <div class="w-1/2 px-6 bg-gray-500 bg-opacity-20 bg-clip-padding backdrop-filter backdrop-blur-sm text-white z-50 py-4 rounded-lg">
          <div class="center">
            <div class="character-container">
              <h1 class="title text-[#00FF00] text-4xl mb:2 md:mb-5">You are <%= @character.name %></h1>
              <h2 class="subtitle text-[#00FF00] text-xl mb:2 md:mb-5"> Alignment: <%= @character.alignment %></h2>
              <div class="character-info">
                <%= image_tag s3_presigned_url('characterchordsbucket23', @character.s3key), class: "image" %>
                <p class="description"><%= @character.description %></p>
              </div>
            </div>
            <div class="form-container">
              <%= form_with url: playlists_path, method: :post do |form| %>
                <%= form.label :query, "Enter a music genre for a personalized quiz-based playlist!", class: "form-label" %>
                <%= form.text_field :query, required: true, maxlength: 40, class: "form-input" %>
                <%= form.hidden_field :character_name, value: @character.name %>
                <%= form.hidden_field :alignment, value: @character.alignment %>
                <%= form.hidden_field :theme_id, value: @character.theme_id %>
                <%= form.hidden_field :character_id_id, value: @character.character_id %>
                <%= form.submit "Create Playlist", class: "form-button" %>
              <% end %>
              <div class="patience">
                It will take a few seconds for us to ask ChatGPT and ChatGPT to respond.
                <br>
                Patience, my young child, patience.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const form = document.querySelector("form");
      const patienceMessage = document.querySelector(".patience");

      patienceMessage.style.display = "none";

      form.addEventListener("submit", function() {
        patienceMessage.style.display = "block";
      });
    });
  </script>
  <script>
    const para = document.createElement("div");
    para.className = 'flex flex-wrap gap-0.5 h-screen items-center justify-center relative';
    let el = '<div class="transition-colors duration-[1.5s] hover:duration-[0s] border-[#00FF00] h-[calc(5vw-2px)] w-[calc(5vw-2px)] md:h-[calc(4vw-2px)] md:w-[calc(4vw-2px)] lg:h-[calc(3vw-4px)] lg:w-[calc(3vw-4px)] bg-gray-900 hover:bg-[#00FF00]"></div>';
    for (var k = 1; k <= 1000; k++) {
      el += '<div class="transition-colors duration-[1.5s] hover:duration-[0s] border-[#00FF00] h-[calc(5vw-2px)] w-[calc(5vw-2px)] md:h-[calc(4vw-2px)] md:w-[calc(4vw-2px)] lg:h-[calc(3vw-4px)] lg:w-[calc(3vw-4px)] bg-gray-900 hover:bg-[#00FF00]"></div>';
    };

    para.innerHTML = el;
    document.getElementById("myDIV").appendChild(para);
  </script>
</body>
</html>
